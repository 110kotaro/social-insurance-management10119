# 社会保険管理システム テストケース

## 📋 目次
1. [認証・アカウント管理](#1-認証アカウント管理)
2. [初回セットアップ](#2-初回セットアップ)
3. [社員管理](#3-社員管理)
4. [申請管理](#4-申請管理)
5. [期限管理](#5-期限管理)
6. [変更履歴機能](#6-変更履歴機能)
7. [ダッシュボード](#7-ダッシュボード)
8. [申請フロー設定](#8-申請フロー設定)
9. [計算機能](#9-計算機能)
10. [エラーハンドリング](#10-エラーハンドリング)

---

## 1. 認証・アカウント管理

### 1.1 新規アカウント作成

#### AUTH-001: 新規アカウント作成（正常系）
- **優先度**: 🔴 高
- **前提条件**: なし
- **操作手順**:
  1. 登録画面でメールアドレス、パスワード、表示名を入力
  2. 登録ボタンをクリック
- **期待結果**:
  1. メール認証画面に遷移
  2. 認証メールが送信される
  3. メール認証完了までダッシュボードに遷移しない
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### AUTH-002: メールアドレス重複エラー
- **優先度**: 🔴 高
- **前提条件**: 既存のメールアドレスで登録済み
- **操作手順**:
  1. 既存のメールアドレスで登録を試みる
- **期待結果**: エラーメッセージが表示される
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

#### AUTH-003: パスワード強度チェック
- **優先度**: 🟡 中
- **前提条件**: なし
- **操作手順**:
  1. 6文字未満のパスワードで登録を試みる
- **期待結果**: バリデーションエラーが表示される
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### AUTH-004: 必須項目チェック
- **優先度**: 🔴 高
- **前提条件**: なし
- **操作手順**:
  1. 必須項目を空欄のまま登録を試みる
- **期待結果**: バリデーションエラーが表示される
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

---

### 1.2 メール認証

#### AUTH-005: メール認証画面の表示
- **優先度**: 🔴 高
- **前提条件**: 新規アカウント作成後
- **操作手順**:
  1. メール認証画面にアクセス
- **期待結果**:
  1. メールアドレスが表示される
  2. 認証メール再送信ボタンが表示される
  3. 認証状態確認ボタンが表示される
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

#### AUTH-006: メール認証前のダッシュボードアクセス
- **優先度**: 🔴 高
- **前提条件**: メール認証未完了
- **操作手順**:
  1. メール認証未完了の状態で`/dashboard`にアクセス
- **期待結果**: メール認証画面にリダイレクトされる
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### AUTH-007: メール認証完了後の遷移
- **優先度**: 🔴 高
- **前提条件**: メール認証完了
- **操作手順**:
  1. メール内のリンクをクリック
  2. アプリに戻る
- **期待結果**:
  1. 組織未作成の場合：組織作成画面に遷移
  2. 組織作成済みの場合：ダッシュボードに遷移
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### AUTH-008: 認証メール再送信
- **優先度**: 🟡 中
- **前提条件**: メール認証未完了
- **操作手順**:
  1. 認証メール再送信ボタンをクリック
- **期待結果**:
  1. 再送信成功メッセージが表示される
  2. 60秒のクールダウンが設定される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### AUTH-009: 認証状態の確認
- **優先度**: 🟡 中
- **前提条件**: メール認証未完了
- **操作手順**:
  1. 認証状態確認ボタンをクリック
- **期待結果**: Firebase Authenticationの最新状態を確認し、認証済みの場合は自動遷移
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 1.3 ログイン

#### AUTH-010: 正常ログイン
- **優先度**: 🔴 高
- **前提条件**: アカウント作成済み
- **操作手順**:
  1. 正しいメールアドレスとパスワードでログイン
- **期待結果**: ダッシュボードに遷移
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### AUTH-011: ログイン失敗（パスワード誤り）
- **優先度**: 🔴 高
- **前提条件**: アカウント作成済み
- **操作手順**:
  1. 誤ったパスワードでログインを試みる
- **期待結果**: エラーメッセージが表示される
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

#### AUTH-012: ログイン失敗（メールアドレス未登録）
- **優先度**: 🔴 高
- **前提条件**: なし
- **操作手順**:
  1. 未登録のメールアドレスでログインを試みる
- **期待結果**: エラーメッセージが表示される
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

---

## 2. 初回セットアップ

### 2.1 セットアップウィザード

#### SETUP-001: 組織情報の入力
- **優先度**: 🔴 高
- **前提条件**: メール認証完了
- **操作手順**:
  1. ステップ1で組織情報を入力
  2. 次へボタンをクリック
- **期待結果**: ステップ2に進む
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### SETUP-002: 部署の追加
- **優先度**: 🔴 高
- **前提条件**: ステップ1完了
- **操作手順**:
  1. ステップ2で部署を追加
  2. 次へボタンをクリック
- **期待結果**:
  1. 部署が追加される
  2. ステップ3に進む
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### SETUP-003: 保険情報の入力
- **優先度**: 🔴 高
- **前提条件**: ステップ2完了
- **操作手順**:
  1. ステップ3で保険情報を入力
  2. 次へボタンをクリック
- **期待結果**: ステップ4に進む
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

#### SETUP-004: 等級表のインポート
- **優先度**: 🔴 高
- **前提条件**: ステップ3完了
- **操作手順**:
  1. ステップ4で等級表CSVをインポート
  2. 次へボタンをクリック
- **期待結果**:
  1. 等級表がインポートされる
  2. ステップ5に進む
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

#### SETUP-005: 申請フロー設定
- **優先度**: 🔴 高
- **前提条件**: ステップ4完了
- **操作手順**:
  1. ステップ5で申請種別を設定
  2. 次へボタンをクリック
- **期待結果**: ステップ6に進む
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

#### SETUP-006: 最終確認画面の表示
- **優先度**: 🔴 高
- **前提条件**: ステップ5完了
- **操作手順**:
  1. ステップ7（最終確認）に進む
- **期待結果**:
  1. 事業所番号が表示されない
  2. 住所に郵便番号が含まれる
  3. 事業主氏名が表示される
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

#### SETUP-007: セットアップ完了
- **優先度**: 🔴 高
- **前提条件**: 全ステップ完了
- **操作手順**:
  1. 完了ボタンをクリック
- **期待結果**: ダッシュボードに遷移
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

---

## 3. 社員管理

### 3.1 社員作成

#### EMP-001: 社員の新規作成（正常系）
- **優先度**: 🔴 高
- **前提条件**: 組織作成済み
- **操作手順**:
  1. 社員作成画面で基本情報を入力
  2. 各ステップで情報を入力
  3. 保存ボタンをクリック
- **期待結果**: 社員が作成され、社員一覧に表示される
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### EMP-002: 必須項目チェック
- **優先度**: 🔴 高
- **前提条件**: なし
- **操作手順**:
  1. 必須項目を空欄のまま保存を試みる
- **期待結果**: バリデーションエラーが表示される
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### EMP-003: 社員番号・メールアドレスの重複チェック
- **優先度**: 🔴 高
- **前提条件**: 既存の社員が存在
- **操作手順**:
  1. 既存の社員番号またはメールアドレスで作成を試みる
- **期待結果**: エラーメッセージが表示される
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

#### EMP-004: ファイル添付
- **優先度**: 🟡 中
- **前提条件**: なし
- **操作手順**:
  1. 社員作成時にファイルを添付⇒そんな機能ない、編集時のみ追加
  2. 保存
- **期待結果**: ファイルが添付され、詳細画面で表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 3.2 社員編集

#### EMP-005: 社員情報の編集（メール認証済み）
- **優先度**: 🔴 高
- **前提条件**: メール認証済みの社員が存在
- **操作手順**:
  1. 社員編集画面で情報を変更
  2. 保存ボタンをクリック
- **期待結果**:
  1. 確認ダイアログが表示される
  2. 承認後、変更履歴に記録される
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### EMP-006: 社員情報の編集（メール認証未完了）
- **優先度**: 🔴 高
- **前提条件**: メール認証未完了の社員が存在
- **操作手順**:
  1. 社員編集画面で情報を変更
  2. 保存ボタンをクリック
- **期待結果**:
  1. 確認ダイアログが表示されない
  2. 変更履歴に記録されない
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### EMP-007: 保険情報の個別フィールド変更
- **優先度**: 🔴 高
- **前提条件**: メール認証済みの社員が存在
- **操作手順**:
  1. 等級の適用開始日を変更
  2. 保存
- **期待結果**: 変更履歴に「等級の適用開始日: 旧値 → 新値」と表示される
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

#### EMP-008: 添付ファイルの追加
- **優先度**: 🔴 高
- **前提条件**: メール認証済みの社員が存在
- **操作手順**:
  1. 社員編集画面でファイルを追加
  2. 保存
- **期待結果**: 変更履歴に「添付ファイル「ファイル名」を追加」と表示される
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### EMP-009: 添付ファイルの削除
- **優先度**: 🔴 高
- **前提条件**: メール認証済みの社員が存在、ファイル添付済み
- **操作手順**:
  1. 社員編集画面でファイルを削除
  2. 保存
- **期待結果**: 変更履歴に「添付ファイル「ファイル名」を削除」と表示される
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### EMP-010: 変更履歴の表示
- **優先度**: 🔴 高
- **前提条件**: 変更履歴が存在する社員
- **操作手順**:
  1. 社員詳細画面の変更履歴タブを開く
- **期待結果**:
  1. 変更箇所が1行で表示される
  2. 変更前後の値が表示される
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

---

### 3.3 社員削除

#### EMP-011: 社員削除（メール認証未完了）
- **優先度**: 🔴 高
- **前提条件**: メール認証未完了の社員が存在
- **操作手順**:
  1. 社員詳細画面で削除ボタンをクリック
  2. 確認ダイアログで承認
- **期待結果**: 社員が削除される
- **実行状況**: [ ] 未実行 / [✓ ] 成功 / [ ] 失敗

#### EMP-012: 社員削除（メール認証済み）
- **優先度**: 🔴 高
- **前提条件**: メール認証済みの社員が存在
- **操作手順**:
  1. 社員詳細画面で削除ボタンをクリック
- **期待結果**: エラーメッセージが表示され、削除できない
- **実行状況**: [ ] 未実行 / [ ✓] 成功 / [ ] 失敗

---

## 4. 申請管理

### 4.1 申請作成

#### 4.1.1 外部申請（資格取得届）

#### APP-001: 資格取得届の作成（社員選択）
- **優先度**: 🔴 高
- **前提条件**: 社員が存在
- **操作手順**:
  1. 申請作成画面で資格取得届を選択
  2. 社員を選択
- **期待結果**:
  1. 社員情報が自動入力される
  2. `acquisitionDate`に`joinDate`が自動転記される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-002: 資格取得届の作成（複数被保険者）
- **優先度**: 🔴 高
- **前提条件**: 複数の社員が存在
- **操作手順**:
  1. 資格取得届を作成
  2. 複数の社員を選択
- **期待結果**:
  1. 各被保険者ごとに期限が計算される
  2. `data.insuredPersons[].deadline`に保存される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-003: 資格取得届の作成（手入力）
- **優先度**: 🟡 中
- **前提条件**: なし
- **操作手順**:
  1. 資格取得届を作成
  2. 社員を選択せず手入力
- **期待結果**: 手入力した情報が保存される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

#### 4.1.2 外部申請（資格喪失届）

#### APP-004: 資格喪失届の作成（社員選択）
- **優先度**: 🔴 高
- **前提条件**: 社員が存在
- **操作手順**:
  1. 申請作成画面で資格喪失届を選択
  2. 社員を選択
- **期待結果**:
  1. 社員情報が自動入力される
  2. `lossDate`に`retirementDate + 1日`が自動転記される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-005: 資格喪失届の期限計算
- **優先度**: 🔴 高
- **前提条件**: 資格喪失届を作成
- **操作手順**:
  1. `lossDate`を設定
  2. 保存
- **期待結果**: `lossDate + 5日`で各被保険者の期限が計算される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

#### 4.1.3 外部申請（賞与支払届）

#### APP-006: 賞与支払届の作成（共通支払日）
- **優先度**: 🔴 高
- **前提条件**: なし
- **操作手順**:
  1. 賞与支払届を作成
  2. 共通支払日を設定
  3. 被保険者を追加
- **期待結果**: 各被保険者の期限が`commonBonusPaymentDate + 5日`で計算される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-007: 賞与支払届の作成（個別支払日優先）
- **優先度**: 🔴 高
- **前提条件**: なし
- **操作手順**:
  1. 賞与支払届を作成
  2. 共通支払日と個別支払日を設定
  3. 保存
- **期待結果**: 個別支払日が設定されている被保険者は`bonusPaymentDate + 5日`で計算される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

#### 4.1.4 内部申請

#### APP-008: 内部申請の作成（社員モード）
- **優先度**: 🔴 高
- **前提条件**: 一般社員でログイン
- **操作手順**:
  1. 申請作成画面で内部申請を選択
  2. 申請種別を選択（3種類のみ表示）
  3. 情報を入力して保存
- **期待結果**:
  1. `draft`状態で保存される
  2. 申請一覧に表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-009: 申請種別の表示制限
- **優先度**: 🔴 高
- **前提条件**: 管理者でログイン
- **操作手順**:
  1. 申請作成画面を開く
- **期待結果**:
  1. 外部申請：8種類のみ表示
  2. 内部申請：3種類のみ表示
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 4.2 申請編集

#### APP-010: 申請の編集（draft状態）
- **優先度**: 🔴 高
- **前提条件**: `draft`状態の申請が存在
- **操作手順**:
  1. 申請詳細画面で編集ボタンをクリック
  2. 情報を変更して保存
- **期待結果**: 変更が保存される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-011: 申請の編集（pending状態）
- **優先度**: 🔴 高
- **前提条件**: `pending`状態の申請が存在
- **操作手順**:
  1. 申請詳細画面を開く
- **期待結果**: 編集ボタンが表示されない
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-012: 申請の編集（returned状態）
- **優先度**: 🔴 高
- **前提条件**: `returned`状態の申請が存在
- **操作手順**:
  1. 申請詳細画面で編集ボタンをクリック
  2. 情報を変更して保存
- **期待結果**: 変更が保存され、再送信可能になる
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-013: 申請編集時の社員選択
- **優先度**: 🟡 中
- **前提条件**: 外部申請（住所変更・氏名変更）が存在
- **操作手順**:
  1. 申請編集画面で社員を選択
- **期待結果**: 社員情報が自動入力される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 4.3 申請送信・承認

#### APP-014: 内部申請の送信
- **優先度**: 🔴 高
- **前提条件**: `draft`状態の内部申請が存在
- **操作手順**:
  1. 申請詳細画面で送信ボタンをクリック
- **期待結果**:
  1. `status`が`pending`に変更される
  2. 送信履歴が記録される
  3. 編集不可になる
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-015: 内部申請の承認
- **優先度**: 🔴 高
- **前提条件**: `pending`状態の内部申請が存在、管理者でログイン
- **操作手順**:
  1. 申請詳細画面で承認ボタンをクリック
- **期待結果**:
  1. `status`が`approved`に変更される
  2. 承認履歴が記録される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-016: 内部申請の差戻し
- **優先度**: 🔴 高
- **前提条件**: `pending`状態の内部申請が存在、管理者でログイン
- **操作手順**:
  1. 申請詳細画面で差戻しボタンをクリック
  2. 差戻し理由を入力
  3. 承認
- **期待結果**:
  1. `status`が`returned`に変更される
  2. 差戻し履歴が記録される
  3. 申請データのスナップショットが保存される
  4. 編集可能になる
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-017: 内部申請の却下
- **優先度**: 🔴 高
- **前提条件**: `pending`状態の内部申請が存在、管理者でログイン
- **操作手順**:
  1. 申請詳細画面で却下ボタンをクリック
  2. 却下理由を入力
  3. 承認
- **期待結果**:
  1. `status`が`rejected`に変更される
  2. 却下履歴が記録される
  3. 編集不可になる
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-018: 差戻し後の再送信
- **優先度**: 🔴 高
- **前提条件**: `returned`状態の内部申請が存在
- **操作手順**:
  1. 申請を編集
  2. 送信ボタンをクリック
- **期待結果**:
  1. `status`が`pending`に変更される
  2. 再送信履歴が記録される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 4.4 申請一覧

#### APP-019: 申請一覧の表示（管理者）
- **優先度**: 🔴 高
- **前提条件**: 管理者でログイン
- **操作手順**:
  1. 申請一覧画面を開く
- **期待結果**:
  1. 外部申請（自分が作成）+ 社員の内部申請が表示される
  2. 内部申請の`draft`/`created`状態は除外される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-020: 申請一覧の表示（社員）
- **優先度**: 🔴 高
- **前提条件**: 一般社員でログイン
- **操作手順**:
  1. 申請一覧画面を開く
- **期待結果**: 自分の申請のみ表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-021: 申請者の表示
- **優先度**: 🔴 高
- **前提条件**: オーナーが作成した申請が存在
- **操作手順**:
  1. 申請一覧画面を開く
- **期待結果**: `employeeId`が`undefined`の場合は会社名が表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-022: 対象社員の表示（1名）
- **優先度**: 🔴 高
- **前提条件**: 対象社員が1名の申請が存在
- **操作手順**:
  1. 申請一覧画面を開く
- **期待結果**: 「社員A名」と表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-023: 対象社員の表示（2名）
- **優先度**: 🔴 高
- **前提条件**: 対象社員が2名の申請が存在
- **操作手順**:
  1. 申請一覧画面を開く
- **期待結果**: 「社員A名、社員B名」と表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-024: 対象社員の表示（3名以上）
- **優先度**: 🔴 高
- **前提条件**: 対象社員が3名以上の申請が存在
- **操作手順**:
  1. 申請一覧画面を開く
- **期待結果**: 「社員A名　他〇名」と表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-025: 期限ステータスの表示
- **優先度**: 🔴 高
- **前提条件**: 期限が設定されている申請が存在
- **操作手順**:
  1. 申請一覧画面を開く
- **期待結果**: 「期限超過：●名、5日以内：●名」の形式で表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 4.5 申請詳細

#### APP-026: 申請詳細の表示
- **優先度**: 🔴 高
- **前提条件**: 申請が存在
- **操作手順**:
  1. 申請詳細画面を開く
- **期待結果**: 申請情報が正しく表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-027: 申請者の表示
- **優先度**: 🔴 高
- **前提条件**: オーナーが作成した申請が存在
- **操作手順**:
  1. 申請詳細画面を開く
- **期待結果**: 申請者に会社名が表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-028: 期限情報の表示（ヘッダー）
- **優先度**: 🔴 高
- **前提条件**: 期限が設定されている申請が存在
- **操作手順**:
  1. 申請詳細画面を開く
- **期待結果**: ヘッダーに期限チップが表示される（色分け・アイコン付き）
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-029: 期限情報の表示（被保険者情報）
- **優先度**: 🔴 高
- **前提条件**: 期限が設定されている被保険者が存在
- **操作手順**:
  1. 申請詳細画面を開く
- **期待結果**: 各被保険者情報に期限が強調表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-030: 期限超過の表示
- **優先度**: 🔴 高
- **前提条件**: 期限超過の被保険者が存在
- **操作手順**:
  1. 申請詳細画面を開く
- **期待結果**: 赤のボーダー + 赤背景 + 「期限超過」バッジが表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### APP-031: 期限5日以内の表示
- **優先度**: 🔴 高
- **前提条件**: 期限5日以内の被保険者が存在
- **操作手順**:
  1. 申請詳細画面を開く
- **期待結果**: オレンジのボーダー + オレンジ背景 + 「5日以内」バッジが表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

## 5. 期限管理

### 5.1 期限計算

#### DEADLINE-001: 資格取得届の期限計算
- **優先度**: 🔴 高
- **前提条件**: 資格取得届を作成
- **操作手順**:
  1. `acquisitionDate`を設定
  2. 保存
- **期待結果**: 各被保険者の期限が`acquisitionDate + 5日`で計算される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DEADLINE-002: 資格喪失届の期限計算
- **優先度**: 🔴 高
- **前提条件**: 資格喪失届を作成
- **操作手順**:
  1. `lossDate`を設定
  2. 保存
- **期待結果**: 各被保険者の期限が`lossDate + 5日`で計算される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DEADLINE-003: 賞与支払届の期限計算（共通支払日）
- **優先度**: 🔴 高
- **前提条件**: 賞与支払届を作成
- **操作手順**:
  1. `commonBonusPaymentDate`を設定
  2. 保存
- **期待結果**: 各被保険者の期限が`commonBonusPaymentDate + 5日`で計算される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DEADLINE-004: 賞与支払届の期限計算（個別支払日優先）
- **優先度**: 🔴 高
- **前提条件**: 賞与支払届を作成
- **操作手順**:
  1. `commonBonusPaymentDate`と`bonusPaymentDate`を設定
  2. 保存
- **期待結果**: 個別支払日が設定されている被保険者は`bonusPaymentDate + 5日`で計算される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DEADLINE-005: 報酬月額変更届の期限計算
- **優先度**: 🔴 高
- **前提条件**: 報酬月額変更届を作成
- **操作手順**:
  1. 申請を作成して保存
- **期待結果**: 期限が設定されない
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DEADLINE-006: 複数被保険者の期限計算
- **優先度**: 🔴 高
- **前提条件**: 複数の被保険者が存在する申請を作成
- **操作手順**:
  1. 各被保険者の取得日/喪失日/支払日を設定
  2. 保存
- **期待結果**: 各被保険者ごとに個別の期限が計算される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 5.2 期限ステータス判定

#### DEADLINE-007: 期限超過の判定
- **優先度**: 🔴 高
- **前提条件**: 期限が過去の申請が存在
- **操作手順**:
  1. 申請一覧画面を開く
- **期待結果**: 「期限超過：●名」と表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DEADLINE-008: 期限5日以内の判定
- **優先度**: 🔴 高
- **前提条件**: 期限が5日以内の申請が存在
- **操作手順**:
  1. 申請一覧画面を開く
- **期待結果**: 「5日以内：●名」と表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DEADLINE-009: 期限ステータスの集計
- **優先度**: 🔴 高
- **前提条件**: 複数の被保険者が存在する申請
- **操作手順**:
  1. 申請一覧画面を開く
- **期待結果**: 期限超過と5日以内の人数が正しく集計される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

## 6. 変更履歴機能

### 6.1 変更履歴の記録

#### HISTORY-001: メール認証済み社員の編集
- **優先度**: 🔴 高
- **前提条件**: メール認証済みの社員が存在
- **操作手順**:
  1. 社員情報を編集
  2. 保存
- **期待結果**:
  1. 確認ダイアログが表示される
  2. 変更履歴に記録される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### HISTORY-002: メール認証未完了社員の編集
- **優先度**: 🔴 高
- **前提条件**: メール認証未完了の社員が存在
- **操作手順**:
  1. 社員情報を編集
  2. 保存
- **期待結果**:
  1. 確認ダイアログが表示されない
  2. 変更履歴に記録されない
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### HISTORY-003: 基本情報の変更履歴
- **優先度**: 🔴 高
- **前提条件**: メール認証済みの社員が存在
- **操作手順**:
  1. 氏名を変更
  2. 保存
- **期待結果**: 変更履歴に「氏: 旧値 → 新値」と表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### HISTORY-004: 保険情報の変更履歴
- **優先度**: 🔴 高
- **前提条件**: メール認証済みの社員が存在
- **操作手順**:
  1. 等級の適用開始日を変更
  2. 保存
- **期待結果**: 変更履歴に「等級の適用開始日: 旧値 → 新値」と表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### HISTORY-005: 未入力から入力済みへの変更
- **優先度**: 🔴 高
- **前提条件**: メール認証済みの社員が存在
- **操作手順**:
  1. 等級の適用開始日を未入力から入力
  2. 保存
- **期待結果**: 変更履歴に「等級の適用開始日: - → 新値」と表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### HISTORY-006: 添付ファイル追加の変更履歴
- **優先度**: 🔴 高
- **前提条件**: メール認証済みの社員が存在
- **操作手順**:
  1. ファイルを追加
  2. 保存
- **期待結果**: 変更履歴に「添付ファイル「ファイル名」を追加」と表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### HISTORY-007: 添付ファイル削除の変更履歴
- **優先度**: 🔴 高
- **前提条件**: メール認証済みの社員が存在、ファイル添付済み
- **操作手順**:
  1. ファイルを削除
  2. 保存
- **期待結果**: 変更履歴に「添付ファイル「ファイル名」を削除」と表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 6.2 変更履歴の表示

#### HISTORY-008: 変更履歴の表示
- **優先度**: 🔴 高
- **前提条件**: 変更履歴が存在する社員
- **操作手順**:
  1. 社員詳細画面の変更履歴タブを開く
- **期待結果**: 変更履歴が時系列で表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### HISTORY-009: 変更履歴の表示形式
- **優先度**: 🔴 高
- **前提条件**: 変更履歴が存在する社員
- **操作手順**:
  1. 社員詳細画面の変更履歴タブを開く
- **期待結果**: 変更箇所が1行で分かりやすく表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### HISTORY-010: 変更履歴のソート
- **優先度**: 🟡 中
- **前提条件**: 複数の変更履歴が存在
- **操作手順**:
  1. 社員詳細画面の変更履歴タブを開く
- **期待結果**: 新しい順にソートされて表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

## 7. ダッシュボード

### 7.1 要対応サマリー

#### DASH-001: 未承認の内部申請の表示
- **優先度**: 🔴 高
- **前提条件**: `pending`状態の内部申請が存在
- **操作手順**:
  1. ダッシュボードを開く
- **期待結果**: 未承認の内部申請が件数とともに表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DASH-002: 未提出申請の表示
- **優先度**: 🔴 高
- **前提条件**: `draft`/`created`/`returned`状態の申請が存在
- **操作手順**:
  1. ダッシュボードを開く
- **期待結果**: 申請種別ごとに未提出申請が表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DASH-003: 未提出申請のフィルタリング
- **優先度**: 🔴 高
- **前提条件**: 他社員の`draft`/`created`状態の内部申請が存在
- **操作手順**:
  1. ダッシュボードを開く
- **期待結果**: 他社員の未提出内部申請は表示されない
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DASH-004: 計算未確定の保険料の表示
- **優先度**: 🔴 高
- **前提条件**: 未確定の計算が存在
- **操作手順**:
  1. ダッシュボードを開く
- **期待結果**: 計算未確定の保険料が件数とともに表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 7.2 期限・リマインダー

#### DASH-005: 期限超過・期限5日以内の表示
- **優先度**: 🔴 高
- **前提条件**: 期限超過・期限5日以内の申請が存在
- **操作手順**:
  1. ダッシュボードを開く
- **期待結果**: 申請種別ごとに期限超過・期限5日以内が表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DASH-006: 期限ステータスの集計
- **優先度**: 🔴 高
- **前提条件**: 複数の被保険者が存在する申請
- **操作手順**:
  1. ダッシュボードを開く
- **期待結果**: 各被保険者の期限が正しく集計される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### DASH-007: 期限アラートの表示
- **優先度**: 🟡 中
- **前提条件**: 期限が近い申請が存在
- **操作手順**:
  1. ダッシュボードを開く
- **期待結果**: 期限アラートが表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

## 8. 申請フロー設定

### 8.1 申請種別設定

#### FLOW-001: 申請種別の表示制限
- **優先度**: 🔴 高
- **前提条件**: 管理者でログイン
- **操作手順**:
  1. 申請フロー設定画面を開く
- **期待結果**:
  1. 外部申請：8種類のみ表示
  2. 内部申請：3種類のみ表示
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### FLOW-002: 申請種別の編集
- **優先度**: 🔴 高
- **前提条件**: 申請種別が存在
- **操作手順**:
  1. 申請種別を編集
  2. 申請種別名を変更
  3. 保存
- **期待結果**:
  1. コードフィールドが表示されない
  2. 説明文フィールドが表示されない
  3. 申請種別名が更新される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### FLOW-003: 申請種別の有効/無効設定
- **優先度**: 🟡 中
- **前提条件**: 申請種別が存在
- **操作手順**:
  1. 申請種別の有効/無効を切り替え
  2. 保存
- **期待結果**: 有効/無効が更新される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### FLOW-004: 内部申請種別の追加
- **優先度**: 🟡 中
- **前提条件**: 管理者でログイン
- **操作手順**:
  1. 内部申請種別を追加
  2. 申請種別名を入力
  3. 保存
- **期待結果**: 新しい申請種別が追加される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### FLOW-005: 内部申請種別の削除
- **優先度**: 🟡 中
- **前提条件**: カスタム申請種別が存在
- **操作手順**:
  1. カスタム申請種別を削除
- **期待結果**: 申請種別が削除される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 8.2 添付書類設定

#### FLOW-006: 添付書類設定の申請種別選択
- **優先度**: 🔴 高
- **前提条件**: 申請種別が存在
- **操作手順**:
  1. 添付書類設定画面を開く
  2. 申請種別を選択
- **期待結果**:
  1. 外部申請：8種類のみ表示
  2. 内部申請：3種類のみ表示
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### FLOW-007: 添付書類設定の追加
- **優先度**: 🟡 中
- **前提条件**: 申請種別が存在
- **操作手順**:
  1. 添付書類設定を追加
  2. 申請種別、許可ファイル形式、最大ファイルサイズを設定
  3. 保存
- **期待結果**: 添付書類設定が追加される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### FLOW-008: 添付書類設定の編集
- **優先度**: 🟡 中
- **前提条件**: 添付書類設定が存在
- **操作手順**:
  1. 添付書類設定を編集
  2. 設定を変更
  3. 保存
- **期待結果**: 設定が更新される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

## 9. 計算機能

### 9.1 月次計算

#### CALC-001: 月次計算の実行
- **優先度**: 🔴 高
- **前提条件**: 社員が存在、給与データが存在
- **操作手順**:
  1. 計算画面で月次計算を実行
- **期待結果**: 保険料が正しく計算される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### CALC-002: 月次計算の確定
- **優先度**: 🔴 高
- **前提条件**: 未確定の計算が存在
- **操作手順**:
  1. 計算詳細画面で確定ボタンをクリック
- **期待結果**: 計算が確定される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 9.2 賞与計算

#### CALC-003: 賞与計算の実行
- **優先度**: 🔴 高
- **前提条件**: 社員が存在、賞与データが存在
- **操作手順**:
  1. 計算画面で賞与計算を実行
- **期待結果**: 保険料が正しく計算される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### CALC-004: 賞与計算の確定
- **優先度**: 🔴 高
- **前提条件**: 未確定の賞与計算が存在
- **操作手順**:
  1. 賞与計算詳細画面で確定ボタンをクリック
- **期待結果**: 計算が確定される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

## 10. エラーハンドリング

### 10.1 ネットワークエラー

#### ERROR-001: ネットワークエラー時の処理
- **優先度**: 🔴 高
- **前提条件**: ネットワークが切断されている
- **操作手順**:
  1. 申請を作成して保存を試みる
- **期待結果**: エラーメッセージが表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### ERROR-002: Firestoreエラー時の処理
- **優先度**: 🔴 高
- **前提条件**: Firestoreに接続できない
- **操作手順**:
  1. データを保存しようとする
- **期待結果**: エラーメッセージが表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### ERROR-003: Storageエラー時の処理
- **優先度**: 🔴 高
- **前提条件**: Storageに接続できない
- **操作手順**:
  1. ファイルをアップロードしようとする
- **期待結果**: エラーメッセージが表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

### 10.2 バリデーションエラー

#### ERROR-004: 必須項目のバリデーション
- **優先度**: 🔴 高
- **前提条件**: なし
- **操作手順**:
  1. 必須項目を空欄のまま保存を試みる
- **期待結果**: バリデーションエラーが表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### ERROR-005: ファイルサイズ制限のバリデーション
- **優先度**: 🟡 中
- **前提条件**: ファイルサイズ制限が設定されている
- **操作手順**:
  1. 制限を超えるサイズのファイルをアップロードしようとする
- **期待結果**: エラーメッセージが表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### ERROR-006: ファイル形式制限のバリデーション
- **優先度**: 🟡 中
- **前提条件**: ファイル形式制限が設定されている
- **操作手順**:
  1. 許可されていない形式のファイルをアップロードしようとする
- **期待結果**: エラーメッセージが表示される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

## 11. 統合テストシナリオ

### 11.1 初回アカウント作成から申請作成まで

#### INT-001: 初回アカウント作成フロー
- **優先度**: 🔴 高
- **前提条件**: なし
- **操作手順**:
  1. 新規アカウントを作成
  2. メール認証を完了
  3. セットアップウィザードを完了
  4. 社員を追加
  5. 申請を作成
- **期待結果**: すべてのステップが正常に完了する
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### INT-002: 申請作成から承認まで
- **優先度**: 🔴 高
- **前提条件**: 社員が存在
- **操作手順**:
  1. 内部申請を作成
  2. 送信
  3. 管理者で承認
- **期待結果**: 申請が承認される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### INT-003: 申請作成から期限計算まで
- **優先度**: 🔴 高
- **前提条件**: 社員が存在
- **操作手順**:
  1. 資格取得届を作成
  2. 保存
- **期待結果**: 各被保険者の期限が正しく計算される
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

## 12. パフォーマンステスト

### 12.1 大量データの処理

#### PERF-001: 大量の社員データの読み込み
- **優先度**: 🟡 中
- **前提条件**: 100名以上の社員が存在
- **操作手順**:
  1. 社員一覧画面を開く
- **期待結果**: ページネーションが正しく動作する
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### PERF-002: 大量の申請データの読み込み
- **優先度**: 🟡 中
- **前提条件**: 100件以上の申請が存在
- **操作手順**:
  1. 申請一覧画面を開く
- **期待結果**: ページネーションが正しく動作する
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

#### PERF-003: 大量の計算データの読み込み
- **優先度**: 🟡 中
- **前提条件**: 100件以上の計算が存在
- **操作手順**:
  1. 計算一覧画面を開く
- **期待結果**: ページネーションが正しく動作する
- **実行状況**: [ ] 未実行 / [ ] 成功 / [ ] 失敗

---

## 📝 テスト実行時のチェックリスト

### 事前準備
- [ ] Firebase Emulatorが起動している
- [ ] テスト用のデータが準備されている
- [ ] ブラウザの開発者ツールが開いている（エラー確認用）

### テスト実行後
- [ ] エラーログを確認
- [ ] コンソールエラーがないことを確認
- [ ] Firestoreのデータが正しく保存されていることを確認
- [ ] Storageのファイルが正しく保存されていることを確認

---

## 📊 優先度の説明

- 🔴 **高**: 必須機能、主要機能の動作確認
- 🟡 **中**: 重要だが必須ではない機能
- 🟢 **低**: パフォーマンスやUI改善に関するテスト

---

## ⚠️ 注意事項

1. **テスト環境**: Firebase Emulator環境でテストを実施
2. **データクリーンアップ**: 各テスト実行前にデータをクリーンアップすることを推奨
3. **エラーログ**: ブラウザのコンソールとFirebase Emulatorのログを確認
4. **回帰テスト**: 修正後に既存機能が正常に動作することを確認
